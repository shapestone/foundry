# {{.ProjectName}} Environment Configuration
# Copy this file to .env and update values for your environment

# Service Configuration
SERVICE_NAME={{.CustomVariables.service_name | default "user"}}
SERVICE_VERSION=1.0.0
ENVIRONMENT=development

# Server Ports
GRPC_PORT={{.CustomVariables.grpc_port | default "9090"}}
HTTP_PORT={{.CustomVariables.http_port | default "8080"}}
METRICS_PORT={{.CustomVariables.metrics_port | default "2112"}}

# Database Configuration
DATABASE_DRIVER={{.CustomVariables.database_driver | default "postgres"}}
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME={{.ProjectName | lower}}_db
DATABASE_USER={{.ProjectName | lower}}_user
DATABASE_PASSWORD={{.ProjectName | lower}}_password
DATABASE_SSL_MODE=disable
DATABASE_MAX_OPEN_CONNS=25
DATABASE_MAX_IDLE_CONNS=25
DATABASE_CONN_MAX_LIFETIME=5m

# Full database URL (alternative to individual settings)
DATABASE_URL=postgres://{{.ProjectName | lower}}_user:{{.ProjectName | lower}}_password@localhost:5432/{{.ProjectName | lower}}_db?sslmode=disable

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=10

# Full Redis URL (alternative to individual settings)
REDIS_URL=redis://localhost:6379/0

{{- if eq (.CustomVariables.message_broker | default "nats") "nats"}}
# NATS Configuration
NATS_HOST=localhost
NATS_PORT=4222
NATS_USER=
NATS_PASSWORD=
NATS_CLUSTER_ID={{.ProjectName | lower}}-cluster

# Full NATS URL (alternative to individual settings)
NATS_URL=nats://localhost:4222

{{- else if eq (.CustomVariables.message_broker | default "nats") "kafka"}}
# Kafka Configuration
KAFKA_BROKERS=localhost:9092
KAFKA_CONSUMER_GROUP={{.ProjectName | lower}}-consumers
KAFKA_CLIENT_ID={{.ProjectName | lower}}-{{.CustomVariables.service_name | default "user"}}
KAFKA_VERSION=2.8.0
KAFKA_RETRY_MAX=3

{{- else if eq (.CustomVariables.message_broker | default "nats") "rabbitmq"}}
# RabbitMQ Configuration
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/
RABBITMQ_EXCHANGE={{.ProjectName | lower}}-exchange

# Full RabbitMQ URL (alternative to individual settings)
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
{{- end}}

# Observability Configuration

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# Tracing
TRACING_ENABLED=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_SERVICE_NAME={{.ProjectName | lower}}-{{.CustomVariables.service_name | default "user"}}
JAEGER_SAMPLER_TYPE=const
JAEGER_SAMPLER_PARAM=1

# Metrics
METRICS_ENABLED=true
METRICS_PATH=/metrics
PROMETHEUS_NAMESPACE={{.ProjectName | lower}}
PROMETHEUS_SUBSYSTEM={{.CustomVariables.service_name | default "user"}}

# Health Checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s

# Security Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# Circuit Breaker Configuration
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_MAX_REQUESTS=10
CIRCUIT_BREAKER_INTERVAL=60s
CIRCUIT_BREAKER_TIMEOUT=30s
CIRCUIT_BREAKER_MAX_CONSECUTIVE_FAILURES=5

# Graceful Shutdown
SHUTDOWN_TIMEOUT=30s

# External Service URLs
{{- range $service := list "auth" "notification" "billing" }}
{{- $serviceUpper := $service | upper }}
{{$serviceUpper}}_SERVICE_URL=http://localhost:8080
{{$serviceUpper}}_SERVICE_TIMEOUT=30s
{{$serviceUpper}}_SERVICE_RETRIES=3
{{- end}}

# Kubernetes Configuration (for K8s deployments)
KUBERNETES_NAMESPACE={{.CustomVariables.namespace | default "default"}}
KUBERNETES_SERVICE_ACCOUNT=default

# TLS Configuration
TLS_ENABLED=false
TLS_CERT_FILE=/etc/ssl/certs/server.crt
TLS_KEY_FILE=/etc/ssl/private/server.key
TLS_CA_FILE=/etc/ssl/certs/ca.crt

# Service Mesh Configuration (Istio/Linkerd)
SERVICE_MESH_ENABLED=false
MESH_TYPE={{.CustomVariables.service_mesh | default "istio"}}

# Development Configuration
DEV_MODE=true
DEV_AUTO_RELOAD=true
DEV_PROFILING_ENABLED=true
DEV_DEBUG_ENDPOINTS=true

# Testing Configuration
TEST_DATABASE_URL=postgres://{{.ProjectName | lower}}_user:{{.ProjectName | lower}}_password@localhost:5432/{{.ProjectName | lower}}_test_db?sslmode=disable
TEST_REDIS_URL=redis://localhost:6379/1
{{- if eq (.CustomVariables.message_broker | default "nats") "nats"}}
TEST_NATS_URL=nats://localhost:4222
{{- else if eq (.CustomVariables.message_broker | default "nats") "kafka"}}
TEST_KAFKA_BROKERS=localhost:9092
{{- else if eq (.CustomVariables.message_broker | default "nats") "rabbitmq"}}
TEST_RABBITMQ_URL=amqp://guest:guest@localhost:5672/
{{- end}}

# Monitoring URLs (for development)
PROMETHEUS_URL=http://localhost:9090
GRAFANA_URL=http://localhost:3000
JAEGER_UI_URL=http://localhost:16686
{{- if eq (.CustomVariables.message_broker | default "nats") "nats"}}
NATS_MONITOR_URL=http://localhost:8222
{{- else if eq (.CustomVariables.message_broker | default "nats") "rabbitmq"}}
RABBITMQ_MANAGEMENT_URL=http://localhost:15672
{{- end}}

# Feature Flags
FEATURE_NEW_API_ENABLED=false
FEATURE_EXPERIMENTAL_CACHING=false
FEATURE_ENHANCED_LOGGING=true

# Performance Tuning
GOMAXPROCS=0
GOGC=100
GOMEMLIMIT=0

# Docker Configuration
DOCKER_REGISTRY={{.CustomVariables.docker_registry | default "localhost:5000"}}
DOCKER_IMAGE_TAG=latest

# CI/CD Configuration
BUILD_NUMBER=
GIT_COMMIT=
GIT_BRANCH=
BUILD_TIMESTAMP=