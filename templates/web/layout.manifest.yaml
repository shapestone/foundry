name: "web"
version: "1.0.0"
author: "Foundry Team"
description: "Web application layout with HTML templates, static assets, and web-specific middleware"
min_foundry_version: "0.5.0"

structure:
  directories:
    - path: "internal/handlers"
      description: "HTTP request handlers for pages and API"
    - path: "internal/models"
      description: "Data models and domain types"
    - path: "internal/middleware"
      description: "Web-specific middleware (sessions, CSRF, auth)"
    - path: "internal/services"
      description: "Business logic layer"
    - path: "templates"
      description: "HTML templates"
    - path: "static"
      description: "Static assets (CSS, JS, images)"
    - path: "static/css"
      description: "Stylesheet files"
    - path: "static/js"
      description: "JavaScript files"
    - path: "static/images"
      description: "Image assets"

  files:
    - template: "project/main.go.tmpl"
      target: "main.go"
    - template: "project/go.mod.tmpl"
      target: "go.mod"
    - template: "project/README.md.tmpl"
      target: "README.md"
    - template: "project/Makefile.tmpl"
      target: "Makefile"
    - template: "project/Dockerfile.tmpl"
      target: "Dockerfile"
    - template: "project/docker-compose.yml.tmpl"
      target: "docker-compose.yml"
    - template: "project/gitignore.tmpl"
      target: ".gitignore"
    - template: "project/.env.example.tmpl"
      target: ".env.example"
    - template: "project/foundry.yaml.tmpl"
      target: "foundry.yaml"
    - template: "templates/layout.html.tmpl"
      target: "templates/layout.html"
    - template: "templates/index.html.tmpl"
      target: "templates/index.html"
    - template: "templates/404.html.tmpl"
      target: "templates/404.html"
    - template: "static/style.css.tmpl"
      target: "static/css/style.css"
    - template: "static/app.js.tmpl"
      target: "static/js/app.js"

dependencies:
  - "github.com/gorilla/mux"
  - "github.com/gorilla/sessions"
  - "github.com/gorilla/csrf"
  - "github.com/joho/godotenv"

features:
  - "web-server"
  - "html-templates"
  - "static-assets"
  - "session-management"
  - "csrf-protection"
  - "form-handling"
  - "docker"
  - "makefile"

variables:
  - name: "http_port"
    default: "8080"
    description: "HTTP server port"
  - name: "session_secret"
    default: "change-this-secret-key"
    description: "Session secret key"
  - name: "csrf_key"
    default: "32-byte-long-auth-key"
    description: "CSRF authentication key"

components:
  page_handler:
    template: "components/page_handler.go.tmpl"
    target_dir: "internal/handlers"
  api_handler:
    template: "components/api_handler.go.tmpl"
    target_dir: "internal/handlers"
  model:
    template: "components/model.go.tmpl"
    target_dir: "internal/models"
  middleware:
    template: "components/middleware.go.tmpl"
    target_dir: "internal/middleware"
  service:
    template: "components/service.go.tmpl"
    target_dir: "internal/services"